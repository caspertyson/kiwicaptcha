document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("captcha-box"),t=document.createElement("p");t.id="question",t.textContent="Loading CAPTCHA...";var n=document.createElement("input");n.type="text",n.id="answer",n.placeholder="Your answer";var i=document.createElement("button");i.id="submit-answer",i.textContent="Submit Answer";var d=document.createElement("img");d.src="https://kiwicaptcha.web.app/vibingBird.gif",d.id="gif";var a=document.createElement("p");a.id="loadingTitle",a.textContent="Checking you are human...";var r=document.createElement("input");r.type="text",r.id="name",r.placeholder="Your name";var e=document.getElementById("captcha-box");e.appendChild(a),e.appendChild(r),e.appendChild(d),e.appendChild(t),e.appendChild(n),e.appendChild(i),a.hidden=!0,d.hidden=!0;var o=document.createElement("style");o.type="text/css",o.innerHTML=`
      body {
        font-family: Arial, sans-serif;
      }
      
      #name{
        display: none;
      }

      #captcha-box {
        width: 300px;
        margin: 20px auto;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 7px;
        text-align: center;
      }
      
      #answer {
        margin-top: 10px;
        padding: 8px;
        width: calc(100% - 16px);
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      
      #submit-answer {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      
      #gif{
        width: 100px;
      }

      #tick{
        width: 100px;
      }

      #submit-answer:hover {
        background-color: #0056b3;
      }
    `,document.head.appendChild(o);let p="";function c(){fetch("https://us-central1-kiwicaptcha.cloudfunctions.net/startSession").then(e=>e.json()).then(e=>{var t=document.getElementById("question");p=e.sessionId,t.textContent=e.question}).catch(e=>{t.textContent="Failed to load CAPTCHA.",console.error("Error:",e)})}i.addEventListener("click",function(){t.hidden=!0,i.hidden=!0,n.hidden=!0,a.hidden=!1,d.hidden=!1,""==n.value&&(console.log("empty input"),n.value=" "),fetch("https://us-central1-kiwicaptcha.cloudfunctions.net/checkAnswer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:p,clientAnswer:n.value})}).then(e=>e.json()).then(d=>{if(n.value="",d.correct&&""==r.value){window.parent.postMessage({type:"CAPTCHA_VERIFIED",verified:!0},"*"),t.hidden=!0,i.hidden=!0,n.hidden=!0;var a=document.getElementById("loadingTitle");a.textContent="Verified!";var o=document.createElement("img");o.src="https://kiwicaptcha.web.app/tick.gif",o.id="tick",e.appendChild(o);var p=document.getElementById("gif");p.hidden=!0}else{t.hidden=!1,i.hidden=!1,n.hidden=!1;var a=document.getElementById("loadingTitle"),p=document.getElementById("gif");a.hidden=!0,p.hidden=!0,c()}}).catch(e=>{console.error("Error:",e)})}),c()});